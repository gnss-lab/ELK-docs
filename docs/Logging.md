# Логирование. Что это и в чем его польза.

## Зачем нужно логирование

Что значит логирование? Логирование или еще назвают журнал событий является важным аспектом разработки программного обеспечения, поскольку оно предоставляет ценную информацию о поведении ПО. Речь идет о записи специального текстового файла (лога) с полной информацией о работе программы. Существует несколько причин, по которым ведение журнала необходимо.

1. **Отладка**
   Журналы помогают разработчикам понимать и диагностировать проблемы в их ПО, предоставляя подробную информацию о том, что происходит внутри системы. Эта информация может быть использована для выявления и исправления ошибок.
2. **Мониторинг**
   Журналы могут использоваться для мониторинга работоспособности, а также для выявления потенциальных проблем. Журналы также можно использовать для отслеживания состояния важных процессов. Например миграция базы данных или обновление системы.
3. **Нормативные акты и стандарты** 
   В некоторых случаях ведение журнала требуется в соответствии с нормативными актами или отраслевыми стандартами для соответствия требованиям соответствия. Журналы могут служить доказательством соответствия требованиям и могут использоваться для демонстрации того, что система работает в соответствии с установленными политиками и процедурами.
4. **Аудит**
   Журналы могут использоваться в целях аудита, чтобы помочь убедиться, что система используется правильно, а также для обнаружения и предотвращения несанкционированного доступа или неправильного использования.

## Уровни логирования

Заниматься логированием необходимо во время разработки и последующей эксплуатации всех IT-систем. Но если так делать, получим огромное количество файлов и разобраться в них будет крайне сложно. Даже в том случае, если классифицировать их по типам и степени важности. Чтобы не разводить хаос, систематизировать важную информацию, упростить ее последующее использование, предусмотрены уровни логирования. Всего выделяют 5 основных:

- **Debug**
  Уровень *Debug* используется для регистрации подробной информации, которая в основном предназначена для разработчиков. Отладочные сообщения обычно используются на этапе разработки и тестирования, чтобы помочь понять, что происходит внутри системы.
- **Info**
  Уровень *Info* используется для регистрации информации о нормальных, ожидаемых событиях. Информационные сообщения могут дать представление о поведении системы и могут использоваться в целях мониторинга.
- **Warning**
  Уровень *Warning* используется для регистрации необычных или неожиданных событий, но не обязательно ошибок. Предупреждения могут указывать на потенциальные проблемы, которые необходимо устранить. Например нехватка места на диске.
- **Error**
  Уровень *Error* используется для регистрации событий, которые представляют собой сбой или непредвиденное условие. Сообщения об ошибках могут указывать на проблему с системой, которую необходимо устранить, например, сбой подключения к базе данных.
- **Fatal**
  Уровень *Fatal* используется для регистрации наиболее серьезных событий, таких как полный сбой системы или критическая проблема безопасности. Критические сообщения указывают на то, что требуется немедленное внимание для предотвращения или устранения серьезной проблемы.

Используя различные уровни ведения журнала, программное обеспечение для ведения журнала предоставляет способ фильтровать регистрируемых событий, что облегчает фокусировку на наиболее важных событиях. 

## Основы грамотного логирования

Чтобы получить файлы логирования, которые будут удобными в последующей работе, следует грамотно подойти к процессу их создания:

- Логировать все важные события, будь то запуск приложение, остановка или возобновление транзакций, успешная регистрация, ошибки.
- Исключить часто повторяющиеся слова, что существенно упростит поиск нужной информации в будущем.
- Добавлять к логам теги: переходя по ним вы сможете находить данные, даже если они находятся в разных категориях.
- Использовать только нужную информацию: лишние сведения будут только засорять дисплей.
- Использовать типы и уровни логирования осознанно. Например, критические события должны регистрироваться на критическом уровне, в то время как менее серьезные события могут регистрироваться на уровне информации или отладки. Это упрощает фильтрацию журнала.

Следуя этим основам грамотного ведения журнала программного обеспечения, можно гарантировать, что данные журнала собираются таким образом, что облегчает отладку и мониторинг вашего ПО.

## Библиотеки логирование для языка программирования Python

Существует несколько популярных библиотек ведения журнала для Python:

1. **logging**
   Встроенный модуль ведения журнала в стандартной библиотеке Python - это гибкая и мощная библиотека ведения журнала, которая предоставляет множество функциональных возможностей "из коробки".

2. **structlog**
   Это библиотека расширяет встроенный модуль Python для ведения журнала дополнительными функциями, такими как возможность прикреплять дополнительные данные к сообщениям журнала или манипулировать сообщениями журнала до их отправки.

3. **loguru**
   это библиотека сделает ваш журнал более простым в использовании. Он предоставляет простой и интуитивно понятный интерфейс для протоколирования сообщений и поддерживает расширенные функции, такие как фильтрация журналов, цветной вывод и обработка исключений. 

   > Именно loguru мы советует использовать в качестве ведение журнала на языке программирование Python

4. **logbook**
   Это библиотека ведения журнала, которая разработана таким образом, чтобы быть быстрой и эффективной, и предоставляет такие функции, как ведение журнала с учетом контекста, гибкое форматирование журнала и поддержка различных уровней ведения журнала.

Как видно все библиотеки имеют пости одинаковый функционал. Лучшая библиотека ведения журнала для вашего проекта будет зависеть от ваших конкретных потребностей. 

## Централизация логов

Централизация данных журнала относится к практике сбора данных журнала из нескольких источников и хранения их в центральном хранилище. Это облегчает управление всей информацией и ее отслеживание, так что вы можете использовать ее для решения проблем и убедиться, что все работает правильно. Наличие всех логов в одном месте также повышает безопасность и помогает уберечь информацию от потери. И это также может ускорить и упростить поиск и устранение проблем, потому что вам не нужно просматривать информацию из множества разных мест.

Существуют различные способы централизации данных журнала, но цель всегда состоит в том, чтобы иметь всю информацию в одном месте, к которому легко получить доступ и которым можно пользоваться.

Существует несколько способов централизации данных журнала, включая использование централизованных систем ведения журнала, таких как Elastic Stack, Logstash или Graylog, или с помощью облачных служб ведения журнала, таких как Google Stackdriver. Наилучший подход к централизации данных журнала будет зависеть от конкретных потребностей вашей организации. В нашем случаи мы будет использовать стек ELK для централизации логов. Как добавить ваше ПО в ELK посмотрите следующий туториал: [Добавление сервиса в ELK](./Adding-a-service-to-ELK.md)

## Вывод

Подводя итог, ведения журнала является важнейшим компонентом разработки и эксплуатации программного обеспечения которая дает ценную информацию. Логирование дает возможность быстро находить проблемы и их источники, устранять их, выявлять конфликты в конфигурационных файлах, следить за безопасностью.